<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito de Compras</title>
    <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>
<header>
  <nav class="nav">
    <input type="checkbox" id="menu-toggle" class="menu-toggle" />
    <label for="menu-toggle" class="hamburger">&#9776;</label>

    <ul class="nav-left">
      <li><a href="../index.html">Inicio</a></li>
      <li><a href="../pages/otros-productos.html"> Otros Productos</a></li>
    </ul>

    <div class="logo-container">
      <img src="../assets/img/logo.png" alt="Logo MAG Naturales" class="logo" />
    </div>

    <ul class="nav-right">
      <li><a href="../pages/blog.html">Blog</a></li>
      <li><a href="../pages/contacto.html">Contacto</a></li>
    </ul>

    <div class="carrito">
      <a href="./pages/carrito.html">
        <i class="fa-solid fa-cart-shopping"></i>
        <span class="contador-carrito">0</span>
      </a>
    </div>

    <!-- Menú mobile -->
    <ul class="nav-mobile-menu">
      <li><a href="./index.html">Inicio</a></li>
      <li><a href="../pages/otros-productos.html">Otros Productos</a></li>
      <li><a href="../pages/blog.html">Blog</a></li>
      <li><a href="../pages/contacto.html">Contacto</a></li>
    </ul>
  </nav>
</header>

  <h1>Tu Carrito</h1>
  <div id="carrito-container"></div>

  <h2 id="total-carrito"></h2>

  <button id="btnEnviarWsp">Enviar pedido por WhatsApp</button>

  <script src="./carrito.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
  const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
  const contenedor = document.getElementById("carrito-container");
  const totalCarrito = document.getElementById("total-carrito");

  if (carrito.length === 0) {
    contenedor.innerHTML = "<p>El carrito está vacío.</p>";
    totalCarrito.textContent = "";
    return;
  }

  let total = 0;
  contenedor.innerHTML = "";

  carrito.forEach(producto => {
    const subtotal = (producto.precio * producto.cantidad) / 100;
    total += subtotal;

    const card = document.createElement("div");
    card.classList.add("item-carrito");

    // Supone que las imágenes están en la misma carpeta con el mismo nombre que el producto
    const imgSrc = `./assets/img/${producto.nombre.toLowerCase()}.jpg`;

    card.innerHTML = `
      <img src="${imgSrc}" alt="${producto.nombre}" width="100">
      <div>
        <h3>${producto.nombre}</h3>
        <p>Cantidad: ${producto.cantidad}gr</p>
        <p>Precio unitario: $${producto.precio}/100gr</p>
        <p>Subtotal: $${subtotal.toFixed(2)}</p>
      </div>
    `;

    contenedor.appendChild(card);
  });

  totalCarrito.textContent = `Total: $${total.toFixed(2)}`;
});
</script>
</body>
</html>